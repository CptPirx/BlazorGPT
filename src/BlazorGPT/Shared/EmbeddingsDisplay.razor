@using AI.Dev.OpenAI.GPT
@if (Value != null)
{
    <RadzenTree Expand=@OnExpand Collapse=@OnCollapse >
        <RadzenTreeItem Text="">
            <ChildContent>
                <div class="markdown-embeddings">@Value</div>
                @if (tokens != null)
                {
                    <span>Token count: @tokens.Count</span>
                }
            </ChildContent>
            <Template>
                <RadzenIcon Icon="attachment" IconStyle="IconStyle.Info"></RadzenIcon>
                <b>@context.Text</b>
            </Template>
        </RadzenTreeItem>
    </RadzenTree>
}

@code {

    [Parameter]
    public string? Value { get; set; }

    List<int>? tokens;

    protected override void OnParametersSet()
    {
        tokens = GPT3Tokenizer.Encode(Value);
    }

    private void OnExpand(TreeExpandEventArgs arg)
    {
    }

    private void OnCollapse(TreeEventArgs arg)
    {
    }

}
